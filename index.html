<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xab Wallet</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(180deg, #0b1e26, #102f3a);
  color: #fff;
}

.screen {
  display: none;
  padding: 20px;
  padding-bottom: 100px;
}

h2 {
  margin-top: 0;
}

/* ===== –ö–ù–û–ü–ö–ò ===== */
button {
  background: linear-gradient(135deg, #2af598, #009efd);
  border: none;
  border-radius: 12px;
  padding: 14px;
  color: #000;
  font-size: 16px;
  font-weight: bold;
  width: 100%;
  margin-top: 10px;
}

/* ===== –ó–ê–î–ê–ù–ò–Ø ===== */
.task {
  background: rgba(255,255,255,0.07);
  border-radius: 14px;
  padding: 15px;
  margin-bottom: 12px;
}

/* ===== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ===== */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 80px;
  background: rgba(10,25,30,0.95);
  backdrop-filter: blur(12px);
  display: flex;
  justify-content: space-around;
  align-items: center;
  border-top: 1px solid rgba(255,255,255,0.08);
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  font-size: 11px;
  color: #8fa3ad;
}

.nav-item .icon {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  background: rgba(255,255,255,0.08);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  margin-bottom: 4px;
}

.nav-item.active {
  color: #fff;
}

.nav-item.active .icon {
  background: linear-gradient(135deg, #2af598, #009efd);
  color: #000;
}
</style>
</head>

<body>

<!-- ===== –≠–ö–†–ê–ù –ó–ê–î–ê–ù–ò–ô ===== -->
<div id="tasks" class="screen">
  <h2>üìã –ó–∞–¥–∞–Ω–∏—è</h2>

  <div class="task" id="task1">
    –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram –∫–∞–Ω–∞–ª
    <button onclick="completeTask('task1', 5)">–í—ã–ø–æ–ª–Ω–∏—Ç—å (+5)</button>
  </div>

  <div class="task" id="task2">
    –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞
    <button onclick="completeTask('task2', 10)">–í—ã–ø–æ–ª–Ω–∏—Ç—å (+10)</button>
  </div>
</div>

<!-- ===== –ë–û–ù–£–°–´ ===== -->
<div id="bonus" class="screen">
  <h2>üéÅ –ë–æ–Ω—É—Å—ã</h2>
  <button id="dailyBonusBtn" onclick="claimBonus()">–ü–æ–ª—É—á–∏—Ç—å 0.01 TON üéÅ</button>
  <p id="bonusTimer"></p>
</div>

<!-- ===== –ò–ù–í–ï–°–¢–ò–¶–ò–ò ===== -->
<div id="invest" class="screen">
  <h2>üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h2>
  <p>–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤—è—Ç—Å—è –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–ª–∞–Ω—ã</p>
</div>

<!-- ===== –ü–†–û–§–ò–õ–¨ ===== -->
<div id="profile" class="screen">
  <h2>üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
  <p><b>ID:</b> <span id="userId"></span></p>
  <p><b>–ò–º—è:</b> <span id="userName"></span></p>
  <p><b>–ë–∞–ª–∞–Ω—Å:</b> <span id="balance">0</span></p>
</div>

<!-- ===== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ===== -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="showScreen('tasks', this)">
    <div class="icon">üìã</div>
    –ó–∞–¥–∞–Ω–∏—è
  </div>
  <div class="nav-item" onclick="showScreen('bonus', this)">
    <div class="icon">üéÅ</div>
    –ë–æ–Ω—É—Å—ã
  </div>
  <div class="nav-item" onclick="showScreen('invest', this)">
    <div class="icon">üìà</div>
    –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
  </div>
  <div class="nav-item" onclick="showScreen('profile', this)">
    <div class="icon">üë§</div>
    –ü—Ä–æ—Ñ–∏–ª—å
  </div>
</div>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

const user = tg.initDataUnsafe.user || {};
const userId = user.id || 'guest';
const userName = user.first_name || '–ì–æ—Å—Ç—å';

document.getElementById('userId').innerText = userId;
document.getElementById('userName').innerText = userName;

let balance = Number(localStorage.getItem('balance_' + userId)) || 0;
document.getElementById('balance').innerText = balance;

// ===== –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –≠–ö–†–ê–ù–û–í =====
function showScreen(screen, el) {
  document.querySelectorAll('.screen').forEach(s => s.style.display = 'none');
  document.getElementById(screen).style.display = 'block';
  document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
  el.classList.add('active');
}
showScreen('tasks', document.querySelector('.nav-item'));

// ===== –ó–ê–î–ê–ù–ò–Ø =====
function completeTask(id, reward) {
  if (localStorage.getItem(id + '_' + userId)) return;
  balance += reward;
  localStorage.setItem('balance_' + userId, balance);
  localStorage.setItem(id + '_' + userId, 'done');
  document.getElementById('balance').innerText = balance;
  document.getElementById(id).remove();
}

// ===== –ë–û–ù–£–° 24 –ß–ê–°–ê =====
const bonusKey = 'bonus_' + userId;

function claimBonus() {
  const last = localStorage.getItem(bonusKey);
  const now = Date.now();
  if (last && now - last < 86400000) return;
  balance += 0.01;
  localStorage.setItem('balance_' + userId, balance);
  localStorage.setItem(bonusKey, now);
  document.getElementById('balance').innerText = balance.toFixed(2);
}

setInterval(() => {
  const last = localStorage.getItem(bonusKey);
  const btn = document.getElementById('dailyBonusBtn');
  if (!last) return;
  const diff = 86400000 - (Date.now() - last);
  if (diff <= 0) {
    btn.disabled = false;
    btn.innerText = '–ü–æ–ª—É—á–∏—Ç—å 0.01 TON üéÅ';
    document.getElementById('bonusTimer').innerText = '';
  } else {
    btn.disabled = true;
    const h = Math.floor(diff / 3600000);
    const m = Math.floor(diff % 3600000 / 60000);
    document.getElementById('bonusTimer').innerText = `–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ${h}—á ${m}–º`;
  }
}, 1000);
</script>

</body>
</html>
