<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Xab Wallet</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
/* ===== –û–°–ù–û–í–ê ===== */
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, Arial, sans-serif;
  color: white;

  min-height: 100vh;
  background: linear-gradient(
    180deg,
    #0b1f2a 0%,
    #123847 40%,
    #0b1f2a 100%
  );
  background-attachment: fixed;
}

/* ===== –≠–ö–†–ê–ù–´ ===== */
.screen {
  display: none;
  min-height: 100vh;
  padding: 16px;
  padding-bottom: 90px;
  box-sizing: border-box;
}

.screen.active {
  display: block;
}

/* ===== –ó–ê–ì–û–õ–û–í–ö–ò ===== */
h2 {
  margin-top: 0;
  font-size: 22px;
}

/* ===== –ë–ê–õ–ê–ù–° ===== */
.balance {
  font-size: 18px;
  margin-bottom: 16px;
}

/* ===== –ö–ê–†–¢–û–ß–ö–ò ===== */
.task {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 14px;
  padding: 14px;
  margin-bottom: 14px;
  backdrop-filter: blur(6px);
}

.task-title {
  font-weight: 600;
  margin-bottom: 6px;
}

.task-reward {
  font-size: 14px;
  opacity: 0.8;
}

/* ===== –ö–ù–û–ü–ö–ò ===== */
.task button {
  margin-top: 10px;
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: none;
  background: #2ea6ff;
  color: white;
  font-size: 16px;
}

.task button:disabled {
  background: #4a4a4a;
}

/* ===== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ===== */
.nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 70px;
  background: rgba(10, 20, 30, 0.9);
  backdrop-filter: blur(8px);
  display: flex;
  justify-content: space-around;
  align-items: center;
  border-top: 1px solid rgba(255,255,255,0.1);
}

.nav button {
  background: none;
  border: none;
  color: white;
  font-size: 14px;
  opacity: 0.6;
}

.nav button.active {
  opacity: 1;
  font-weight: 600;
}
</style>
</head>

<body>

<!-- ===== –ó–ê–î–ê–ù–ò–Ø ===== -->
<div id="tasksScreen" class="screen active">
  <h2>–ó–∞–¥–∞–Ω–∏—è</h2>
  <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0</span> ‚ÇΩ</div>
  <div id="tasks"></div>
</div>

<!-- ===== –ë–û–ù–£–°–´ ===== -->
<div id="bonusScreen" class="screen">
  <h2>–ë–æ–Ω—É—Å—ã</h2>
  üéÅ –°–∫–æ—Ä–æ –∑–¥–µ—Å—å –±—É–¥—É—Ç –±–æ–Ω—É—Å—ã
</div>

<!-- ===== –ü–†–û–§–ò–õ–¨ ===== -->
<div id="profileScreen" class="screen">
  <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
  <p>ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</p>
  <b id="uid"></b>
</div>

<!-- ===== –ù–ò–ñ–ù–ï–ï –ú–ï–ù–Æ ===== -->
<div class="nav">
  <button id="btnTasks" class="active" onclick="showScreen('tasks')">–ó–∞–¥–∞–Ω–∏—è</button>
  <button id="btnBonus" onclick="showScreen('bonus')">–ë–æ–Ω—É—Å—ã</button>
  <button id="btnProfile" onclick="showScreen('profile')">–ü—Ä–æ—Ñ–∏–ª—å</button>
</div>

<script>
/* ===== TELEGRAM ===== */
const tg = Telegram.WebApp;
tg.ready();

/* ===== USER ===== */
const userId = tg.initDataUnsafe?.user?.id || "guest";
document.getElementById("uid").innerText = userId;

/* ===== STORAGE ===== */
const balanceKey = `balance_${userId}`;
const tasksKey = `tasks_${userId}`;

let balance = parseInt(localStorage.getItem(balanceKey)) || 0;
let completedTasks = JSON.parse(localStorage.getItem(tasksKey)) || [];

/* ===== –ó–ê–î–ê–ù–ò–Ø ===== */
const tasks = [
  { id: 1, title: "–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ Telegram –∫–∞–Ω–∞–ª", reward: 10 },
  { id: 2, title: "–û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞", reward: 15 },
  { id: 3, title: "–ó–∞–π—Ç–∏ –≤ –±–æ—Ç–∞", reward: 5 }
];

function save() {
  localStorage.setItem(balanceKey, balance);
  localStorage.setItem(tasksKey, JSON.stringify(completedTasks));
}

function renderTasks() {
  document.getElementById("balance").innerText = balance;
  const container = document.getElementById("tasks");
  container.innerHTML = "";

  tasks.forEach(task => {
    const done = completedTasks.includes(task.id);

    const div = document.createElement("div");
    div.className = "task";

    div.innerHTML = `
      <div class="task-title">${task.title}</div>
      <div class="task-reward">+${task.reward} ‚ÇΩ</div>
      <button ${done ? "disabled" : ""}>
        ${done ? "–í—ã–ø–æ–ª–Ω–µ–Ω–æ" : "–í—ã–ø–æ–ª–Ω–∏—Ç—å"}
      </button>
    `;

    if (!done) {
      div.querySelector("button").onclick = () => {
        completedTasks.push(task.id);
        balance += task.reward;
        save();
        renderTasks();
      };
    }

    container.appendChild(div);
  });
}

/* ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø ===== */
function showScreen(name) {
  document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
  document.querySelectorAll(".nav button").forEach(b => b.classList.remove("active"));

  if (name === "tasks") {
    tasksScreen.classList.add("active");
    btnTasks.classList.add("active");
  }
  if (name === "bonus") {
    bonusScreen.classList.add("active");
    btnBonus.classList.add("active");
  }
  if (name === "profile") {
    profileScreen.classList.add("active");
    btnProfile.classList.add("active");
  }
}

renderTasks();
</script>

</body>
</html>
